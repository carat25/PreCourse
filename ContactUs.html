<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="contact.css">
    <title>Contact Page</title>
  </head>
  <nav>
    <ul>
      <li>
        <a href=Home.html>Home</a>
      </li>
      <li>
        <a href=Products.html>Products</a>
      </li>
      <li>
        <a href=ContactUs.html>Contact</a>
      </li>
    
    </ul>
  </nav>

  <header>
    <h1>Contact Us - Cassie's Cakes</h1>
    <p>Please contact us at info@cakes.com</p>
  </header>

<main>
  <form class="ContactUs" onsubmit="return submitMessage(event)">
    <label for "Email">Email</label>
    <input type="text" name="Email" id="Email" required>
    <label for "FullName">Full Name</label>
    <input type="text" name="FullName" id="FullName" required>
    <label for "Message">Message</label>
    <textarea name="message" id="message" rows=3 columns="20" required>Leave your message here</textarea>
    
    <button>Clear</button>
    <input type="submit" value="submit">
  </form>
</main>

<footer>
  <!-- <div class="form-title-section">
    <h3>Contact Messages</h3>
    <button>Clear Messages</button>
  </div>
  <div class="form-wrapper">

  </div> -->
  <dl id="currentMessages">
  </dl>
</footer>

<script>
  function submitMessage(event) {
    event.preventDefault();
    const email = document.getElementById("Email").value;
    const fullname = document.getElementById("FullName").value;
    const message = document.getElementById ("message").value;

    const messageObject = {
      email, fullname, message
    };

    let currentMessages=[];

      if (window.sessionStorage.getItem("messages")) {
        currentMessages =
      JSON.parse(
        window.sessionStorage.getItem("messages"));
      }

      currentMessages.push(messageObject);
      window.sessionStorage.setItem("messages",JSON.stringify(currentMessages));
    /*console.log(messageObject);*/
    renderMessages();
  }

  function renderMessages() {
    let currentMessages =[];

    if (window.sessionStorage.getItem("messages")) {currentMessages =
      JSON.parse(window.sessionStorage.getItem("messages"));
  }

  let listItems = [];
  for (let i = 0; i < currentMessages.length; i++) {
    let listItem = "";
    const currentMessage = currentMessages[i];
    listItem +=`<dt>${currentMessage.fullname} - ${currentMessage.email}</dt>`;
    listItem += `<dd>${currentMessage.message}</dd>`;
    listItem += `<br/>`;
    listItems.push(listItem);
      }

      let descList = document.getElementById('currentMessages');
      descList.innerHTML = listItems.join('');
    }

    renderMessages();
</script>
  
</html>